# äººè„¸è¯†åˆ«è€ƒå‹¤ç³»ç»Ÿ - é¡¹ç›®æ€»ç»“

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: åŸºäºæ·±åº¦å­¦ä¹ çš„æ™ºèƒ½äººè„¸è¯†åˆ«è€ƒå‹¤ç³»ç»Ÿ  
**å¼€å‘æ—¶é—´**: 2025å¹´11æœˆ  
**é¡¹ç›®ç‰ˆæœ¬**: v3.0 Final  
**æŠ€æœ¯æ ˆ**: Python + Flask + React + TypeScript + PyTorch + YOLO + FaceNet  
**é¡¹ç›®çŠ¶æ€**: âœ… å·²å®Œæˆ

### é¡¹ç›®ç®€ä»‹
æœ¬ç³»ç»Ÿæ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¼ä¸šçº§è€ƒå‹¤ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œé‡‡ç”¨æ·±åº¦å­¦ä¹ æŠ€æœ¯å®ç°äººè„¸è¯†åˆ«æ‰“å¡ï¼Œæ”¯æŒçµæ´»çš„è€ƒå‹¤è§„åˆ™é…ç½®ã€è‡ªåŠ¨ç¼ºå‹¤æ£€æµ‹ã€å¤šç»´åº¦ç»Ÿè®¡åˆ†æå’ŒæŠ¥è¡¨å¯¼å‡ºã€‚ç³»ç»Ÿåˆ†ä¸ºç®¡ç†å‘˜ç«¯å’Œç”¨æˆ·ç«¯ï¼Œæä¾›å®Œå–„çš„æƒé™ç®¡ç†å’Œæ“ä½œæµç¨‹ã€‚

---

## ğŸ—„ï¸ æ•°æ®åº“æ¶æ„

### æ ¸å¿ƒè¡¨ç»“æ„ï¼ˆ7å¼ è¡¨ï¼‰

#### 1. user - ç”¨æˆ·è¡¨
å­˜å‚¨ç³»ç»Ÿæ‰€æœ‰ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯å’Œç™»å½•å‡­è¯ã€‚

**å…³é”®å­—æ®µ**:
- `id` - ç”¨æˆ·IDï¼ˆä¸»é”®ï¼‰
- `username` - ç”¨æˆ·åï¼ˆå”¯ä¸€ï¼‰
- `student_id` - å­¦å·ï¼ˆå”¯ä¸€ï¼‰
- `password_hash` - ç™»å½•å¯†ç å“ˆå¸Œ
- `department_id` - æ‰€å±éƒ¨é—¨ï¼ˆå¤–é”® â†’ department.idï¼‰
- `position` - èŒä½
- `email`, `phone` - è”ç³»æ–¹å¼
- `entry_date` - å…¥èŒæ—¥æœŸ
- `last_login_at` - æœ€åç™»å½•æ—¶é—´
- `is_active` - æ˜¯å¦å¯ç”¨

**ç‰¹æ®Šè¯´æ˜**: äººè„¸ç‰¹å¾å­˜å‚¨åœ¨ `backend/saved_models/facenet_embeddings.npz` æ–‡ä»¶ä¸­ï¼Œé€šè¿‡ user_id å…³è”ã€‚

#### 2. attendance - è€ƒå‹¤è®°å½•è¡¨
æ‰€æœ‰æ‰“å¡è®°å½•çš„æ ¸å¿ƒè¡¨ã€‚

**å…³é”®å­—æ®µ**:
- `id` - è®°å½•IDï¼ˆä¸»é”®ï¼‰
- `user_id` - ç”¨æˆ·IDï¼ˆå¤–é”® â†’ user.idï¼‰
- `timestamp` - æ‰“å¡æ—¶é—´
- `status` - çŠ¶æ€ï¼ˆpresent-æ­£å¸¸, late-è¿Ÿåˆ°, absent-ç¼ºå‹¤ï¼‰
- `check_type` - æ‰“å¡ç±»å‹ï¼ˆcheckin-ä¸Šç­, checkout-ä¸‹ç­ï¼‰
- `is_late` - æ˜¯å¦è¿Ÿåˆ°
- `is_early` - æ˜¯å¦æ—©é€€
- `rule_id` - åº”ç”¨çš„è§„åˆ™ï¼ˆå¤–é”® â†’ attendance_rule.idï¼‰
- `confidence` - äººè„¸è¯†åˆ«ç½®ä¿¡åº¦

**ç´¢å¼•ä¼˜åŒ–**: user_id, timestamp, check_type, is_late, is_early, CAST(timestamp AS DATE)

#### 3. admin - ç®¡ç†å‘˜è¡¨
å­˜å‚¨ç³»ç»Ÿç®¡ç†å‘˜è´¦å·ä¿¡æ¯ã€‚

**å…³é”®å­—æ®µ**:
- `id` - ç®¡ç†å‘˜IDï¼ˆä¸»é”®ï¼‰
- `username` - ç®¡ç†å‘˜ç”¨æˆ·åï¼ˆå”¯ä¸€ï¼‰
- `password_hash` - å¯†ç å“ˆå¸Œï¼ˆbcryptï¼‰
- `real_name` - çœŸå®å§“å
- `email`, `phone` - è”ç³»æ–¹å¼
- `is_super` - æ˜¯å¦è¶…çº§ç®¡ç†å‘˜
- `is_active` - æ˜¯å¦å¯ç”¨
- `last_login_at`, `last_login_ip` - ç™»å½•ä¿¡æ¯

#### 4. admin_login_log - ç®¡ç†å‘˜ç™»å½•æ—¥å¿—è¡¨
è®°å½•ç®¡ç†å‘˜çš„æ‰€æœ‰ç™»å½•è¡Œä¸ºã€‚

**å…³é”®å­—æ®µ**:
- `admin_id` - ç®¡ç†å‘˜IDï¼ˆå¤–é”® â†’ admin.idï¼‰
- `login_time` - ç™»å½•æ—¶é—´
- `login_ip` - ç™»å½•IP
- `user_agent` - æµè§ˆå™¨ä¿¡æ¯
- `login_status` - ç™»å½•çŠ¶æ€ï¼ˆsuccess/failedï¼‰
- `failure_reason` - å¤±è´¥åŸå› 

#### 5. department - éƒ¨é—¨è¡¨
æ ‘å½¢ç»“æ„çš„éƒ¨é—¨ç»„ç»‡æ¶æ„ã€‚

**å…³é”®å­—æ®µ**:
- `id` - éƒ¨é—¨IDï¼ˆä¸»é”®ï¼‰
- `name` - éƒ¨é—¨åç§°
- `code` - éƒ¨é—¨ä»£ç ï¼ˆå”¯ä¸€ï¼‰
- `parent_id` - çˆ¶éƒ¨é—¨IDï¼ˆå¤–é”® â†’ department.idï¼Œè‡ªå¼•ç”¨ï¼‰
- `manager_id` - éƒ¨é—¨è´Ÿè´£äººï¼ˆå¤–é”® â†’ user.idï¼‰
- `level` - éƒ¨é—¨å±‚çº§
- `sort_order` - æ’åº
- `is_active` - æ˜¯å¦å¯ç”¨

**ç‰¹æ®ŠåŠŸèƒ½**: æ”¯æŒæ— é™å±‚çº§åµŒå¥—ï¼Œé€’å½’ç»Ÿè®¡éƒ¨é—¨äººæ•°ã€‚

#### 6. attendance_rule - è€ƒå‹¤è§„åˆ™è¡¨
çµæ´»çš„è€ƒå‹¤è§„åˆ™é…ç½®ã€‚

**å…³é”®å­—æ®µ**:
- `name` - è§„åˆ™åç§°
- `work_start_time` - ä¸Šç­æ—¶é—´
- `work_end_time` - ä¸‹ç­æ—¶é—´
- `late_threshold` - è¿Ÿåˆ°é˜ˆå€¼ï¼ˆåˆ†é’Ÿï¼‰
- `early_threshold` - æ—©é€€é˜ˆå€¼ï¼ˆåˆ†é’Ÿï¼‰
- `work_days` - å·¥ä½œæ—¥ï¼ˆå¦‚ "1,2,3,4,5"ï¼‰
- `department_id` - é€‚ç”¨éƒ¨é—¨ï¼ˆNULLè¡¨ç¤ºé»˜è®¤è§„åˆ™ï¼‰
- `is_default` - æ˜¯å¦é»˜è®¤è§„åˆ™
- `is_open_mode` - æ˜¯å¦å¼€æ”¾æ¨¡å¼ï¼ˆä¸é™åˆ¶æ‰“å¡æ—¶é—´ï¼‰
- `checkin_before_minutes` - ä¸Šç­æ‰“å¡å¯æå‰åˆ†é’Ÿæ•°
- `enable_once_per_day` - æ˜¯å¦é™åˆ¶æ¯å¤©åªèƒ½æ‰“å¡ä¸€æ¬¡

#### 7. system_log - ç³»ç»Ÿæ—¥å¿—è¡¨
è®°å½•ç³»ç»Ÿè¿è¡Œæ—¥å¿—å’Œé‡è¦äº‹ä»¶ã€‚

**å…³é”®å­—æ®µ**:
- `event_type` - äº‹ä»¶ç±»å‹ï¼ˆuser_register, check_in, errorç­‰ï¼‰
- `message` - æ—¥å¿—æ¶ˆæ¯
- `level` - æ—¥å¿—çº§åˆ«ï¼ˆINFO, WARNING, ERRORç­‰ï¼‰
- `timestamp` - æ—¶é—´æˆ³
- `user_id` - å…³è”ç”¨æˆ·ï¼ˆå¯é€‰ï¼‰
- `extra_data` - é¢å¤–æ•°æ®ï¼ˆJSONæ ¼å¼ï¼‰

### è¡¨å…³ç³»å›¾
```
Admin â”€â”€â”¬â”€â†’ AdminLoginLog
        
Department (æ ‘å½¢) â”€â”€â”¬â”€â†’ Department (å­éƒ¨é—¨)
                    â”œâ”€â†’ User (éƒ¨é—¨æˆå‘˜)
                    â”œâ”€â†’ User (éƒ¨é—¨è´Ÿè´£äºº)
                    â””â”€â†’ AttendanceRule (éƒ¨é—¨è§„åˆ™)

User â”€â”€â”¬â”€â†’ Attendance
       â””â”€â†’ SystemLog

AttendanceRule â”€â”€â†’ Attendance
```

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### åç«¯æ¶æ„ï¼ˆPython + Flaskï¼‰

```
backend/
â”œâ”€â”€ api/                          # APIå±‚
â”‚   â”œâ”€â”€ routes/                   # è·¯ç”±æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ user.py              # ç”¨æˆ·ç®¡ç†API
â”‚   â”‚   â”œâ”€â”€ user_auth.py         # ç”¨æˆ·è®¤è¯API
â”‚   â”‚   â”œâ”€â”€ admin_auth.py        # ç®¡ç†å‘˜è®¤è¯API
â”‚   â”‚   â”œâ”€â”€ attendance.py        # è€ƒå‹¤æ‰“å¡API
â”‚   â”‚   â”œâ”€â”€ attendance_rule.py   # è€ƒå‹¤è§„åˆ™API
â”‚   â”‚   â”œâ”€â”€ department.py        # éƒ¨é—¨ç®¡ç†API
â”‚   â”‚   â”œâ”€â”€ statistics.py        # ç»Ÿè®¡åˆ†æAPI
â”‚   â”‚   â”œâ”€â”€ scheduler.py         # å®šæ—¶ä»»åŠ¡API
â”‚   â”‚   â”œâ”€â”€ video.py             # è§†é¢‘æµAPI
â”‚   â”‚   â””â”€â”€ system.py            # ç³»ç»ŸAPI
â”‚   â”œâ”€â”€ app.py                   # Flaskåº”ç”¨å…¥å£
â”‚   â””â”€â”€ middleware/              # ä¸­é—´ä»¶
â”‚       â”œâ”€â”€ error_handler.py     # é”™è¯¯å¤„ç†
â”‚       â””â”€â”€ logger.py            # æ—¥å¿—ä¸­é—´ä»¶
â”œâ”€â”€ services/                     # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ attendance_service.py    # è€ƒå‹¤æœåŠ¡
â”‚   â”œâ”€â”€ attendance_rule_service.py # è§„åˆ™æœåŠ¡
â”‚   â”œâ”€â”€ scheduler_service.py     # å®šæ—¶ä»»åŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ department_service.py    # éƒ¨é—¨æœåŠ¡
â”‚   â””â”€â”€ user_service.py          # ç”¨æˆ·æœåŠ¡
â”œâ”€â”€ database/                     # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ models.py                # æ•°æ®æ¨¡å‹ï¼ˆç»Ÿä¸€ï¼‰
â”‚   â””â”€â”€ repositories.py          # æ•°æ®ä»“åº“
â”œâ”€â”€ models/                       # AIæ¨¡å‹å±‚
â”‚   â”œâ”€â”€ yolo_detector.py         # YOLOäººè„¸æ£€æµ‹
â”‚   â”œâ”€â”€ facenet_recognizer.py    # FaceNetäººè„¸è¯†åˆ«
â”‚   â””â”€â”€ model_manager.py         # æ¨¡å‹ç®¡ç†å™¨
â”œâ”€â”€ utils/                        # å·¥å…·å±‚
â”‚   â”œâ”€â”€ auth.py                  # è®¤è¯å·¥å…·
â”‚   â”œâ”€â”€ jwt_utils.py             # JWTå·¥å…·
â”‚   â””â”€â”€ response.py              # å“åº”æ ¼å¼åŒ–
â”œâ”€â”€ config/                       # é…ç½®
â”‚   â””â”€â”€ settings.py              # ç³»ç»Ÿé…ç½®
â””â”€â”€ saved_models/                 # æ¨¡å‹æ–‡ä»¶
    â”œâ”€â”€ yolov8n-face.pt          # YOLOæ¨¡å‹
    â””â”€â”€ facenet_embeddings.npz   # äººè„¸ç‰¹å¾åº“
```

### å‰ç«¯æ¶æ„ï¼ˆReact + TypeScriptï¼‰

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ pages/                    # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Login/               # ç™»å½•é¡µï¼ˆç®¡ç†å‘˜/ç”¨æˆ·ï¼‰
â”‚   â”‚   â”œâ”€â”€ Attendance/          # è€ƒå‹¤æ‰“å¡é¡µ
â”‚   â”‚   â”œâ”€â”€ MyAttendance/        # æˆ‘çš„è€ƒå‹¤é¡µ
â”‚   â”‚   â”œâ”€â”€ History/             # è€ƒå‹¤å†å²é¡µ
â”‚   â”‚   â”œâ”€â”€ Statistics/          # ç»Ÿè®¡åˆ†æé¡µ
â”‚   â”‚   â”œâ”€â”€ Users/               # ç”¨æˆ·ç®¡ç†é¡µ
â”‚   â”‚   â”œâ”€â”€ Departments/         # éƒ¨é—¨ç®¡ç†é¡µ
â”‚   â”‚   â”œâ”€â”€ AttendanceRules/     # è€ƒå‹¤è§„åˆ™é¡µ
â”‚   â”‚   â””â”€â”€ Profile/             # ä¸ªäººä¸­å¿ƒé¡µ
â”‚   â”œâ”€â”€ components/               # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Layout/              # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ PrivateRoute/        # è·¯ç”±å®ˆå«
â”‚   â”œâ”€â”€ api/                      # APIå®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ client.ts            # Axioså°è£…
â”‚   â”œâ”€â”€ store/                    # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ authStore.ts         # è®¤è¯çŠ¶æ€ï¼ˆZustandï¼‰
â”‚   â”œâ”€â”€ types/                    # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts             # å…¨å±€ç±»å‹
â”‚   â””â”€â”€ App.tsx                   # åº”ç”¨å…¥å£
â””â”€â”€ public/                       # é™æ€èµ„æº
```

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### 1. äººè„¸è¯†åˆ«æ‰“å¡ç³»ç»Ÿ â­â­â­

**æŠ€æœ¯å®ç°**:
- **äººè„¸æ£€æµ‹**: YOLO v8ï¼ˆyolov8n-face.ptï¼‰
- **äººè„¸è¯†åˆ«**: FaceNetï¼ˆInceptionResnetV1ï¼‰
- **ç‰¹å¾åŒ¹é…**: ä½™å¼¦ç›¸ä¼¼åº¦
- **ç½®ä¿¡åº¦é˜ˆå€¼**: 0.6
- **è®¾å¤‡æ”¯æŒ**: GPUåŠ é€Ÿï¼ˆCUDAï¼‰

**åŠŸèƒ½ç‰¹æ€§**:
- âœ… å®æ—¶è§†é¢‘æµäººè„¸æ£€æµ‹
- âœ… å®æ—¶é¢„è§ˆè¯†åˆ«ç»“æœå’Œé¢„è®¡çŠ¶æ€
- âœ… è‡ªåŠ¨åˆ¤æ–­ä¸Šç­/ä¸‹ç­æ‰“å¡ç±»å‹
- âœ… æ‰“å¡æˆåŠŸåæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
- âœ… æ”¯æŒå¤šè§’åº¦äººè„¸é‡‡é›†

**æ‰“å¡ç±»å‹è‡ªåŠ¨åˆ¤æ–­**:
```python
# æ ¹æ®ä¸Šä¸‹ç­æ—¶é—´ä¸­ç‚¹åˆ¤æ–­
midpoint = (work_start + work_end) / 2
if current_time < midpoint:
    check_type = 'checkin'  # ä¸Šç­æ‰“å¡
else:
    check_type = 'checkout'  # ä¸‹ç­æ‰“å¡
```

### 2. è€ƒå‹¤è§„åˆ™ç®¡ç† â­â­â­

**è§„åˆ™ç±»å‹**:
- **é»˜è®¤è§„åˆ™**: é€‚ç”¨äºæ‰€æœ‰æœªåˆ†é…éƒ¨é—¨è§„åˆ™çš„ç”¨æˆ·
- **éƒ¨é—¨è§„åˆ™**: é’ˆå¯¹ç‰¹å®šéƒ¨é—¨çš„ä¸“å±è§„åˆ™
- **å¼€æ”¾æ¨¡å¼**: ä¸é™åˆ¶æ‰“å¡æ—¶é—´ï¼ˆç”¨äºæµ‹è¯•ï¼‰

**å¯é…ç½®é¡¹**:
- å·¥ä½œæ—¶é—´ï¼ˆä¸Šç­/ä¸‹ç­æ—¶é—´ï¼‰
- è¿Ÿåˆ°/æ—©é€€é˜ˆå€¼
- å·¥ä½œæ—¥è®¾ç½®ï¼ˆå‘¨ä¸€è‡³å‘¨æ—¥ï¼‰
- æ‰“å¡æ—¶é—´çª—å£ï¼ˆå¯æå‰æ‰“å¡åˆ†é’Ÿæ•°ï¼‰
- æ¯å¤©æ‰“å¡æ¬¡æ•°é™åˆ¶ï¼ˆä¸Šç­ä¸€æ¬¡ã€ä¸‹ç­ä¸€æ¬¡ï¼‰

**è§„åˆ™åº”ç”¨ä¼˜å…ˆçº§**:
1. éƒ¨é—¨è§„åˆ™ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
2. çˆ¶éƒ¨é—¨è§„åˆ™ï¼ˆé€çº§å‘ä¸ŠæŸ¥æ‰¾ï¼‰
3. é»˜è®¤è§„åˆ™ï¼ˆå¦‚æœéƒ¨é—¨æ— è§„åˆ™ï¼‰
4. å¼€æ”¾æ¨¡å¼è±å…æ‰€æœ‰é™åˆ¶

### 3. è‡ªåŠ¨ç¼ºå‹¤è®°å½•ç³»ç»Ÿ â­â­â­

**æŠ€æœ¯å®ç°**: APSchedulerå®šæ—¶ä»»åŠ¡

**æ‰§è¡Œæ—¶é—´**: æ¯å¤©23:00è‡ªåŠ¨æ‰§è¡Œ

**æ£€æµ‹é€»è¾‘**:
```python
for user in active_users:
    rule = get_user_rule(user)
    
    # æ£€æŸ¥ä¸Šç­æ‰“å¡
    if not has_checkin_today(user):
        create_absence_record(user, 'checkin')
    
    # æ£€æŸ¥ä¸‹ç­æ‰“å¡
    if not has_checkout_today(user):
        create_absence_record(user, 'checkout')
```

**è±å…æ¡ä»¶**:
- éå·¥ä½œæ—¥
- å¼€æ”¾æ¨¡å¼è§„åˆ™
- ç”¨æˆ·æœªå¯ç”¨

**æ‰‹åŠ¨è§¦å‘**: ç®¡ç†å‘˜å¯é€šè¿‡APIæ‰‹åŠ¨è§¦å‘ï¼ˆç”¨äºæµ‹è¯•ï¼‰

### 4. ç»Ÿè®¡åˆ†æç³»ç»Ÿ â­â­â­

**ç»Ÿè®¡ç»´åº¦**ï¼ˆ16ä¸ªæŒ‡æ ‡ï¼‰:

#### åŸºæœ¬ç»Ÿè®¡ï¼ˆ4ä¸ªï¼‰
- æ€»æ‰“å¡æ¬¡æ•°
- å‡ºå‹¤äººæ•°
- å‡ºå‹¤ç‡ï¼ˆå¸¦æ¸å˜è¿›åº¦æ¡ï¼‰
- åº”åˆ°äººæ•°

#### æ‰“å¡ç±»å‹ç»Ÿè®¡ï¼ˆ4ä¸ªï¼‰
- ä¸Šç­æ‰“å¡æ¬¡æ•°
- ä¸‹ç­æ‰“å¡æ¬¡æ•°
- ä¸Šç­æ‰“å¡ç‡
- ä¸‹ç­æ‰“å¡ç‡

#### è€ƒå‹¤çŠ¶æ€åˆ†å¸ƒï¼ˆ4ä¸ªï¼‰
- æ­£å¸¸æ‰“å¡æ¬¡æ•°ï¼ˆå¸¦è¿›åº¦æ¡ï¼‰
- è¿Ÿåˆ°æ¬¡æ•°ï¼ˆå¸¦è¿›åº¦æ¡ï¼‰
- ç¼ºå‹¤æ¬¡æ•°ï¼ˆå¸¦è¿›åº¦æ¡ï¼‰
- æ—©é€€æ¬¡æ•°

**ç­›é€‰åŠŸèƒ½**:
- æŒ‰æ—¥æœŸç­›é€‰
- æŒ‰éƒ¨é—¨ç­›é€‰ï¼ˆå«å­éƒ¨é—¨ï¼‰

**å¯è§†åŒ–**:
- Ant Design Statistic ç»„ä»¶
- Progress è¿›åº¦æ¡
- å½©è‰²å›¾æ ‡åŒºåˆ†
- Hoverable å¡ç‰‡æ•ˆæœ

### 5. æŠ¥è¡¨å¯¼å‡ºåŠŸèƒ½ â­â­â­

**å¯¼å‡ºå…¥å£**ï¼ˆ3ä¸ªï¼‰:

#### 5.1 æˆ‘çš„è€ƒå‹¤ - ä¸ªäººæœˆæŠ¥
- **ä½ç½®**: æˆ‘çš„è€ƒå‹¤é¡µé¢å³ä¸Šè§’
- **æ ¼å¼**: CSVï¼ˆExcelå…¼å®¹ï¼‰
- **å†…å®¹**: ä¸ªäººæ‰“å¡è®°å½• + ç»Ÿè®¡æ±‡æ€»

#### 5.2 è€ƒå‹¤å†å² - å…¨å‘˜è€ƒå‹¤
- **ä½ç½®**: è€ƒå‹¤å†å²é¡µé¢ç­›é€‰æ 
- **æ ¼å¼**: CSV
- **å†…å®¹**: å…¨å‘˜æ‰“å¡è®°å½•ï¼ˆæ”¯æŒç­›é€‰ï¼‰

#### 5.3 ç»Ÿè®¡åˆ†æ - ç»Ÿè®¡æŠ¥è¡¨
- **ä½ç½®**: ç»Ÿè®¡åˆ†æé¡µé¢å³ä¸Šè§’
- **æ ¼å¼**: CSV
- **å†…å®¹**: åŸºæœ¬ç»Ÿè®¡ + æ‰“å¡ç±»å‹ç»Ÿè®¡ + çŠ¶æ€åˆ†å¸ƒ + è¯¦ç»†è®°å½•

### 6. ç”¨æˆ·å’Œæƒé™ç®¡ç† â­â­â­

**åŒç«¯ç™»å½•ç³»ç»Ÿ**:
- **ç®¡ç†å‘˜ç™»å½•**: `/admin/login`
- **ç”¨æˆ·ç™»å½•**: `/auth/login`
- **JWT Tokenè®¤è¯**: æœ‰æ•ˆæœŸ24å°æ—¶

**æƒé™æ§åˆ¶**:

| åŠŸèƒ½ | æ™®é€šç”¨æˆ· | ç®¡ç†å‘˜ |
|------|---------|--------|
| äººè„¸æ‰“å¡ | âœ… | âœ… |
| æŸ¥çœ‹ä¸ªäººè€ƒå‹¤ | âœ… | âœ… |
| å¯¼å‡ºä¸ªäººæŠ¥è¡¨ | âœ… | âœ… |
| ç”¨æˆ·ç®¡ç† | âŒ | âœ… |
| éƒ¨é—¨ç®¡ç† | âŒ | âœ… |
| è€ƒå‹¤è§„åˆ™é…ç½® | âŒ | âœ… |
| è€ƒå‹¤å†å²æŸ¥è¯¢ | âŒ | âœ… |
| ç»Ÿè®¡åˆ†æ | âŒ | âœ… |
| å®šæ—¶ä»»åŠ¡ç®¡ç† | âŒ | âœ… |

### 7. éƒ¨é—¨ç®¡ç†ç³»ç»Ÿ â­â­

**æ ‘å½¢ç»“æ„**:
- æ”¯æŒå¤šçº§éƒ¨é—¨åµŒå¥—
- çˆ¶å­éƒ¨é—¨å…³ç³»
- éƒ¨é—¨å±‚çº§è‡ªåŠ¨è®¡ç®—

**åŠŸèƒ½ç‰¹æ€§**:
- éƒ¨é—¨CRUDæ“ä½œ
- éƒ¨é—¨è´Ÿè´£äººè®¾ç½®
- éƒ¨é—¨æ’åº
- éƒ¨é—¨å¯ç”¨/ç¦ç”¨
- é€’å½’ç»Ÿè®¡éƒ¨é—¨äººæ•°

**æ˜¾ç¤ºä¼˜åŒ–**:
- æ ‘å½¢ç¼©è¿›æ˜¾ç¤º
- å±‚çº§æ ‡è¯†ï¼ˆâ”œâ”€ â”‚ â””â”€ï¼‰
- é€’å½’åŠ è½½å­éƒ¨é—¨

---

## ğŸ“Š æŠ€æœ¯æ ˆè¯¦æƒ…

### åç«¯æŠ€æœ¯æ ˆ
```
Python 3.8+
â”œâ”€â”€ Flask 2.x                 # Webæ¡†æ¶
â”œâ”€â”€ SQLAlchemy 1.4+          # ORM
â”œâ”€â”€ PyMySQL                   # MySQLé©±åŠ¨
â”œâ”€â”€ APScheduler 3.x          # å®šæ—¶ä»»åŠ¡
â”œâ”€â”€ PyJWT                     # JWTè®¤è¯
â”œâ”€â”€ bcrypt                    # å¯†ç åŠ å¯†
â”œâ”€â”€ PyTorch 2.x              # æ·±åº¦å­¦ä¹ æ¡†æ¶
â”œâ”€â”€ ultralytics              # YOLO v8
â”œâ”€â”€ facenet-pytorch          # FaceNet
â”œâ”€â”€ OpenCV 4.x               # å›¾åƒå¤„ç†
â””â”€â”€ Flask-CORS               # è·¨åŸŸæ”¯æŒ
```

### å‰ç«¯æŠ€æœ¯æ ˆ
```
React 18
â”œâ”€â”€ TypeScript 4.x           # ç±»å‹ç³»ç»Ÿ
â”œâ”€â”€ Ant Design 5.x           # UIç»„ä»¶åº“
â”œâ”€â”€ Zustand                   # çŠ¶æ€ç®¡ç†
â”œâ”€â”€ Axios                     # HTTPå®¢æˆ·ç«¯
â”œâ”€â”€ Day.js                    # æ—¥æœŸå¤„ç†
â””â”€â”€ React Router 6.x         # è·¯ç”±
```

### æ•°æ®åº“
```
MySQL 5.7+
â”œâ”€â”€ InnoDBå¼•æ“
â”œâ”€â”€ UTF8MB4å­—ç¬¦é›†
â”œâ”€â”€ å¤–é”®çº¦æŸ
â””â”€â”€ ç´¢å¼•ä¼˜åŒ–
```

---

## ğŸš€ éƒ¨ç½²è¯´æ˜

### ç¯å¢ƒè¦æ±‚
- Python 3.8+
- Node.js 16+
- MySQL 5.7+
- CUDA 11.xï¼ˆå¯é€‰ï¼Œç”¨äºGPUåŠ é€Ÿï¼‰

### åç«¯éƒ¨ç½²

1. **å®‰è£…ä¾èµ–**:
```bash
cd backend
pip install -r requirements.txt
pip install apscheduler
```

2. **é…ç½®æ•°æ®åº“**:
```python
# config/settings.py
DATABASE_URI = 'mysql+pymysql://root:password@localhost/face_attendance'
```

3. **å¯åŠ¨æœåŠ¡**:
```bash
python run.py
```

### å‰ç«¯éƒ¨ç½²

1. **å®‰è£…ä¾èµ–**:
```bash
cd frontend
npm install
```

2. **é…ç½®APIåœ°å€**:
```typescript
// src/api/client.ts
const API_BASE_URL = 'http://localhost:5000';
```

3. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**:
```bash
npm start
```

4. **ç”Ÿäº§æ„å»º**:
```bash
npm run build
```

### é»˜è®¤è´¦å·

**ç®¡ç†å‘˜**:
- ç”¨æˆ·å: `admin`
- å¯†ç : `admin123`

**ç”¨æˆ·**: éœ€è¦å…ˆæ³¨å†Œå¹¶é‡‡é›†äººè„¸

---

## ğŸ“ ä½¿ç”¨æµç¨‹

### ç®¡ç†å‘˜æ“ä½œæµç¨‹

1. **ç™»å½•ç³»ç»Ÿ** â†’ è®¿é—® `/admin/login`
2. **åˆ›å»ºéƒ¨é—¨ç»“æ„** â†’ è¿›å…¥"éƒ¨é—¨ç®¡ç†"
3. **é…ç½®è€ƒå‹¤è§„åˆ™** â†’ è¿›å…¥"è€ƒå‹¤è§„åˆ™"
4. **ç®¡ç†ç”¨æˆ·** â†’ è¿›å…¥"ç”¨æˆ·ç®¡ç†"
5. **æŸ¥çœ‹ç»Ÿè®¡** â†’ è¿›å…¥"ç»Ÿè®¡åˆ†æ"
6. **æŸ¥çœ‹å†å²** â†’ è¿›å…¥"è€ƒå‹¤å†å²"
7. **å®šæ—¶ä»»åŠ¡ç®¡ç†** â†’ æ‰‹åŠ¨è§¦å‘ç¼ºå‹¤æ£€æŸ¥

### ç”¨æˆ·æ“ä½œæµç¨‹

1. **æ³¨å†Œè´¦å·** â†’ å¡«å†™ä¿¡æ¯ + é‡‡é›†äººè„¸
2. **ç™»å½•ç³»ç»Ÿ** â†’ è®¿é—® `/auth/login`
3. **æ¯æ—¥æ‰“å¡** â†’ è¿›å…¥"è€ƒå‹¤æ‰“å¡"
4. **æŸ¥çœ‹è€ƒå‹¤** â†’ è¿›å…¥"æˆ‘çš„è€ƒå‹¤"
5. **å¯¼å‡ºæŠ¥è¡¨** â†’ ç‚¹å‡»"å¯¼å‡ºæŠ¥è¡¨"

---

## ğŸ¯ æ ¸å¿ƒäº®ç‚¹

### 1. æ™ºèƒ½æ‰“å¡ç±»å‹åˆ¤æ–­
- æ ¹æ®æ—¶é—´è‡ªåŠ¨åˆ¤æ–­ä¸Šç­/ä¸‹ç­
- æ— éœ€ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©
- å‡†ç¡®ç‡100%

### 2. çµæ´»çš„è€ƒå‹¤è§„åˆ™
- æ”¯æŒéƒ¨é—¨è§„åˆ™å’Œé»˜è®¤è§„åˆ™
- å¼€æ”¾æ¨¡å¼ç”¨äºæµ‹è¯•
- å¯é…ç½®æ‰“å¡æ—¶é—´çª—å£
- è§„åˆ™ç»§æ‰¿æœºåˆ¶

### 3. è‡ªåŠ¨åŒ–ç¼ºå‹¤ç®¡ç†
- å®šæ—¶ä»»åŠ¡è‡ªåŠ¨æ£€æµ‹
- åŒºåˆ†ä¸Šç­/ä¸‹ç­ç¼ºå‹¤
- å·¥ä½œæ—¥æ™ºèƒ½åˆ¤æ–­

### 4. å…¨é¢çš„ç»Ÿè®¡åˆ†æ
- 16ä¸ªç»Ÿè®¡æŒ‡æ ‡
- å¤šç»´åº¦ç­›é€‰
- å¯è§†åŒ–å±•ç¤º

### 5. å®Œå–„çš„å¯¼å‡ºåŠŸèƒ½
- 3ä¸ªå¯¼å‡ºå…¥å£
- CSVæ ¼å¼ï¼ˆExcelå…¼å®¹ï¼‰
- åŒ…å«è¯¦ç»†æ•°æ®å’Œç»Ÿè®¡

### 6. é«˜æ€§èƒ½äººè„¸è¯†åˆ«
- YOLO + FaceNetåŒæ¨¡å‹
- GPUåŠ é€Ÿæ”¯æŒ
- å®æ—¶è¯†åˆ«åé¦ˆ

### 7. å®Œå–„çš„æƒé™ä½“ç³»
- åŒç«¯ç™»å½•
- JWTè®¤è¯
- ç»†ç²’åº¦æƒé™æ§åˆ¶

---

## ğŸ“Š é¡¹ç›®æ•°æ®ç»Ÿè®¡

### ä»£ç é‡
- **åç«¯ä»£ç **: ~5500è¡Œ Python
- **å‰ç«¯ä»£ç **: ~4500è¡Œ TypeScript/React
- **æ€»è®¡**: ~10000è¡Œä»£ç 

### åŠŸèƒ½æ¨¡å—
- **æ ¸å¿ƒæ¨¡å—**: 7ä¸ª
- **é¡µé¢æ•°é‡**: 12ä¸ª
- **APIæ¥å£**: 45+ä¸ª
- **æ•°æ®è¡¨**: 7ä¸ª
- **å¯¼å‡ºåŠŸèƒ½**: 3ä¸ª

### å¼€å‘å‘¨æœŸ
- **éœ€æ±‚åˆ†æ**: 1å¤©
- **æ ¸å¿ƒåŠŸèƒ½å¼€å‘**: 5å¤©
- **ä¼˜åŒ–å’Œå®Œå–„**: 2å¤©
- **æ€»è®¡**: çº¦8å¤©

---

## ğŸ“ é¡¹ç›®æ€»ç»“

### æˆåŠŸä¹‹å¤„
1. âœ… å®Œæ•´å®ç°äº†äººè„¸è¯†åˆ«è€ƒå‹¤çš„æ ¸å¿ƒåŠŸèƒ½
2. âœ… çµæ´»çš„è€ƒå‹¤è§„åˆ™é…ç½®ç³»ç»Ÿ
3. âœ… è‡ªåŠ¨åŒ–çš„ç¼ºå‹¤è®°å½•åŠŸèƒ½
4. âœ… å…¨é¢çš„ç»Ÿè®¡åˆ†æå’ŒæŠ¥è¡¨å¯¼å‡º
5. âœ… ç¾è§‚æ˜“ç”¨çš„ç”¨æˆ·ç•Œé¢
6. âœ… å®Œå–„çš„æƒé™ç®¡ç†ç³»ç»Ÿ
7. âœ… æ ‘å½¢éƒ¨é—¨ç»„ç»‡æ¶æ„

### æŠ€æœ¯äº®ç‚¹
1. ğŸŒŸ æ·±åº¦å­¦ä¹ æ¨¡å‹é›†æˆï¼ˆYOLO + FaceNetï¼‰
2. ğŸŒŸ å®šæ—¶ä»»åŠ¡ç³»ç»Ÿï¼ˆAPSchedulerï¼‰
3. ğŸŒŸ æ™ºèƒ½æ‰“å¡ç±»å‹åˆ¤æ–­
4. ğŸŒŸ React + TypeScript ç°ä»£åŒ–å‰ç«¯
5. ğŸŒŸ RESTful API è®¾è®¡
6. ğŸŒŸ JWT Tokenè®¤è¯
7. ğŸŒŸ æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–

### å­¦åˆ°çš„ç»éªŒ
1. æ·±åº¦å­¦ä¹ æ¨¡å‹åœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨
2. å‰åç«¯åˆ†ç¦»æ¶æ„è®¾è®¡
3. å®šæ—¶ä»»åŠ¡çš„å®ç°å’Œç®¡ç†
4. æ•°æ®å¯è§†åŒ–å’Œç”¨æˆ·ä½“éªŒä¼˜åŒ–
5. é¡¹ç›®éœ€æ±‚åˆ†æå’Œè¿­ä»£å¼€å‘
6. CSVå¯¼å‡ºå’Œæ•°æ®æŠ¥è¡¨ç”Ÿæˆ
7. æ ‘å½¢æ•°æ®ç»“æ„çš„å¤„ç†

---

## ğŸ“ é¡¹ç›®ä¿¡æ¯

**é¡¹ç›®åç§°**: åŸºäºæ·±åº¦å­¦ä¹ çš„äººè„¸è¯†åˆ«è€ƒå‹¤ç³»ç»Ÿ  
**å¼€å‘æ—¶é—´**: 2025å¹´11æœˆ  
**é¡¹ç›®ç‰ˆæœ¬**: v3.0 Final  
**å®ŒæˆçŠ¶æ€**: âœ… 100% å®Œæˆ  
**æ•°æ®åº“è¡¨**: 7å¼ è¡¨  
**ä»£ç è¡Œæ•°**: ~10000è¡Œ

---

**æœ€åæ›´æ–°**: 2025-11-19  
**æ–‡æ¡£ç‰ˆæœ¬**: 2.0  
**é¡¹ç›®çŠ¶æ€**: âœ… å·²å®Œæˆå¹¶äº¤ä»˜
